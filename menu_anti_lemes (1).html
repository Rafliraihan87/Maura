<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>🍽️ No More Lemes Club</title>
  <style>
    body {
        font-family:'Poppins',sans-serif;
        background:linear-gradient(135deg,#ff6ec4,#7873f5,#4ade80,#facc15,#f87171);
        background-size:500% 500%;
        animation:bgAnim 20s ease infinite;
        color: #fff;
        min-height:100vh;
        display:flex;
        align-items:center;
        justify-content:center;
        padding:20px
    }
    @keyframes bgAnim{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    
    .stage{
        max-width:1000px;
        width:100%;
        background: rgba(255, 255, 255, 0.9); 
        padding:20px;
        border-radius:20px;
        box-shadow:0 0 25px rgba(0,0,0,0.5);
        color: #333;
    }
    .scene{display:none}
    .scene.active{display:block;animation:fadeIn .6s ease}
    @keyframes fadeIn{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}
    
    /* MODIFIKASI TOMBOL AKSI */
    .btn-group {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
    }
    .btn{
        background:linear-gradient(135deg,#f97316,#ec4899);
        border:none;
        color:#fff;
        padding:15px 40px; 
        border-radius:999px;
        cursor:pointer;
        margin:5px;
        font-weight:700; 
        font-size: 1.1em; 
        min-width: 150px;
    }
    .btn:hover{transform:scale(1.05)}
    
    .person{display:flex;align-items:center;gap:10px;cursor:pointer;background:rgba(0,0,0,0.05);padding:10px;border-radius:12px;margin:10px 0; color: #333;}
    .person:hover{background:rgba(0,0,0,0.1);}
    
    /* MODIFIKASI GRID: 5 KOLOM */
    .food-grid{display:grid;grid-template-columns:repeat(5, minmax(100px, 1fr));gap:12px;margin:20px 0}
    .food{background:rgba(0,0,0,0.05);padding:10px;border-radius:12px;cursor:pointer;text-align:center; color: #333;}
    .food:hover{background:rgba(0,0,0,0.1);transform:scale(1.08)}
    .food img{display:none;}
    .food .food-icon {font-size: 50px; display: block; margin: 0 auto 5px;}

    .feedback{margin-top:15px;font-weight:bold;min-height:30px; padding: 5px 10px; border-radius: 8px;} 
    .feedback.good { background-color: #22c55e; color: #fff; }
    .feedback.warn { background-color: #facc15; color: #333; } 
    .feedback.bad { background-color: #ef4444; color: #fff; }
    
    .pill{
      display:inline-flex; 
      align-items: center;
      padding:5px 10px;
      border-radius:999px;
      margin:3px;
      font-weight:600;
      position: relative; 
      padding-right: 25px; 
      min-height: 35px;
      color: #333;
    }
    .remove-btn {
        position: absolute;
        top: 0;
        right: 0;
        background: rgba(0, 0, 0, 0.2);
        color: #fff;
        border: none;
        cursor: pointer;
        font-size: 14px;
        line-height: 1;
        width: 25px;
        height: 100%;
        border-radius: 0 999px 999px 0;
        display: flex;
        justify-content: center;
        align-items: center;
        opacity: 0.8;
        transition: opacity 0.2s;
    }
    .remove-btn:hover {
        opacity: 1;
    }

    .pill[style*="#22c55e"] { color: #fff; } 
    .pill[style*="#facc15"] { color: #333; } 
    .pill[style*="#ef4444"] { color: #fff; } 


    ul{list-style:none;padding:0}
    ul li{margin:10px 0;padding-left:10px;border-left:3px solid #ec4899}
    .quiz-question{margin:15px 0}
    .hero-img{margin:15px 0;max-width:100%;border-radius:12px}

    /* MODAL STYLES */
    .modal{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,0.7);backdrop-filter:blur(5px);justify-content:center;align-items:center}
    .modal-content{background:#fff;margin:15% auto;padding:30px;border-radius:15px;width:90%;max-width:400px;text-align:center;box-shadow:0 0 30px rgba(0,0,0,0.3);animation:modalOpen .3s ease-out; color: #333;}
    @keyframes modalOpen{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}
    .close-btn{color:#aaa;float:right;font-size:28px;font-weight:bold;cursor:pointer}
    .close-btn:hover,.close-btn:focus{color:#333;text-decoration:none}
    #modal-food-img{display:none;} 
    #modal-food-icon{font-size:100px; display:block; margin: 0 auto 15px;}
    .modal-content h3 {margin-bottom: 0; color: #333;} 
    #modal-simplified-feedback {
        font-size: 1.1em;
        font-weight: 700;
        margin-top: 15px;
        margin-bottom: 20px; 
    }
    #modal-result-title {font-size: 1.5em; margin-bottom: 10px; color: #333;}
    #modal-result-icon {font-size: 80px; margin: 10px 0;}
    #modal-result-text {font-size: 1.2em; font-weight: 600; padding: 10px; border-radius: 8px;}
    /* Gaya untuk tombol notif */
    .notif-btn { background: #f97316; color: #fff; padding: 10px 20px; border-radius: 999px; font-weight: 600; margin-top: 15px; }
  </style>
</head>
<body>
  <div class="stage">
    <section id="scene1" class="scene active">
      <h2>🔥 Stop Jadi Team Lemas! Kenali Anemia, Si Silent Killer</h2>
      <p>Tau nggak sih? Banyak remaja putri & ibu hamil yang sering ngerasa gampang capek, pusing, bahkan pingsan. Bisa jadi itu bukan cuma ‘kurang tidur’ tapi tanda anemia! 😱 Yuk kepoin bareng, biar kita bisa tetap strong, aktif, dan jauh dari anemia. 💪🥦✨</p>
      <img src="https://placeholder-image-service.onrender.com/image/400x300?prompt=Vector illustration of a tired young woman with fading energy and health symbols&id=b782de97-c013-4aec-9327-95e3f3991ee0" class="hero-img" alt="Wanita lelah anemia">
      <button class="btn" onclick="showScene('scene2')">👉 Gaskeun Mulai! 🚀</button>
    </section>

    <section id="scene2" class="scene">
      <h2>✨ Kamu Mau Belajar Tentang Kelompok yang mana Nih?</h2>
      <p>Klik salah satu ya, biar kita bisa bahas sesuai kondisi kamu ✨</p>
      <div class="person" onclick="chooseAudience('remaja')">👩 Remaja Putri – Serings ngerasa lemes pas lagi dapet? Bisa jadi itu anemia, girls!</div>
      <div class="person" onclick="chooseAudience('bumil')">🤰 Ibu Hamil – Bumil juga rawan anemia lho, yuk jaga zat gizi biar si baby tumbuh sehat.</div>
      <button class="btn" onclick="showScene('scene1')">Kembali</button>
    </section>

    <section id="scene3" class="scene">
      <h2 id="konsepJudul"></h2>
      <p id="konsepText"></p>
      <img id="konsepImg" class="hero-img" alt="Ilustrasi konsep anemia">
      <button class="btn" onclick="showScene('scene4')">Lanjut ke Challenge 🍽️</button>
      <button class="btn" onclick="showScene('scene2')">Kembali</button>
    </section>

    <section id="scene4" class="scene">
      <h2>🍽️ Bikin Menu Anti-Lemes Challenge</h2>
      <p>Pilih makanan untuk membuat menu sehat yang kaya zat besi!</p>
      <div id="foodGrid" class="food-grid"></div>
      <div id="piringItems">Piring masih kosong</div>
      <div id="piringFeedback" class="feedback" style="color:#333">Pilih minimal 5 makanan</div>
      
      <div class="btn-group">
          <button class="btn" id="finishBtn" onclick="handleFinishChallenge()">Selesai</button>
          <button class="btn" onclick="resetPlate()">Reset</button>
      </div>
      </section>

    <section id="scene5" class="scene">
      <h2>🌟 Tips Anti-Anemia ala Gen Z</h2>
      <ul>
        <li>🥗 Makan makanan tinggi zat besi (hati ayam, daging, sayur hijau).</li>
        <li>🍊 Tambahin vitamin C (jeruk, jambu, tomat) biar zat besinya terserap maksimal.</li>
        <li>💊 Minum tablet tambah darah tiap minggu (remaja) / tiap hari (bumil).</li>
        <li>🚫 Kurangi kopi & teh setelah makan utama.</li>
        <li>💧 Banyak minum air putih biar fresh.</li>
        <li>🩸 Jangan lupa cek Hb secara rutin.</li>
      </ul>
      <img src="https://placeholder-image-service.onrender.com/image/400x300?prompt=Colorful arrangement of healthy foods rich in iron like spinach, red meat, and citrus fruits&id=b782de97-c013-4aec-9327-95e3f3991ee0" alt="Tips Gizi dengan makanan sehat" class="hero-img">
      <button class="btn" onclick="showScene('scene6')">Lanjut</button>
    </section>

    <section id="scene6" class="scene">
      <h2>🌈 Bye-Bye Anemia, Hello Energi!</h2>
      <p>Anemia itu emang sering dianggap sepele, tapi dampaknya bisa bahaya. Kalau kita jaga pola makan, minum tablet tambah darah secara rutin, dan hidup sehat, dijamin badan auto strong, fokus belajar/work, dan siap mengejar mimpi. Let’s be the generation that’s no more lemes-lemes club! 💪✨</p>
      <img src="https://placeholder-image-service.onrender.com/image/400x300?prompt=Energetic young woman with vibrant energy and health symbols around her&id=b782de97-c013-4aec-9327-95e3f3991ee0" alt="Perempuan penuh energi" class="hero-img">
      <button class="btn" onclick="showScene('scene7')">👉 Akhiri & Share ke Bestie! 🔗</button>
    </section>

    <section id="scene7" class="scene">
      <h2>🎯 Coba Tes Pengetahuanmu!</h2>
      <div id="quiz"></div>
      <button class="btn" onclick="checkQuiz()">Cek Jawaban</button>
      <div id="quizFeedback" class="feedback"></div>
      <button class="btn" onclick="showScene('scene1')">🔄 Akhiri & Kembali ke Awal</button>
    </section>
  </div>

  <div id="foodModal" class="modal" onclick="closeModal(event)">
    <div class="modal-content">
      <span class="close-btn" onclick="document.getElementById('foodModal').style.display='none'">&times;</span>
      <h3 id="modal-food-name"></h3>
      <div id="modal-food-icon"></div> 
      <div id="modal-simplified-feedback"></div> 
      <button class="btn" id="modal-add-btn" onclick="addFoodFromModal()">Tambah ke Piring</button>
    </div>
  </div>
  
  <div id="resultModal" class="modal" onclick="closeModal(event)">
    <div class="modal-content">
      <span class="close-btn" onclick="document.getElementById('resultModal').style.display='none'">&times;</span>
      <h3 id="modal-result-title"></h3> 
      <div id="modal-result-icon"></div>
      <div id="modal-result-text"></div>
      <button class="btn notif-btn" id="result-continue-btn" onclick="document.getElementById('resultModal').style.display='none'; showScene('scene5');">Lanjut ke Tips Anti-Anemia 💪</button>
      <button class="btn notif-btn" id="result-ok-btn" onclick="document.getElementById('resultModal').style.display='none';">Oke</button>

    </div>
  </div>

  <script>
    const scenes=['scene1','scene2','scene3','scene4','scene5','scene6','scene7'];
    function showScene(id){scenes.forEach(s=>document.getElementById(s).classList.remove('active'));document.getElementById(id).classList.add('active');}

    function chooseAudience(type){
      if(type==='remaja'){
        document.getElementById('konsepJudul').textContent='💃 Anemia & Remaja Putri: Kok Bisa Sih?';
        document.getElementById('konsepText').textContent='Remaja putri tuh gampang banget kena anemia, apalagi kalau lagi menstruasi terus makannya asal-asalan. Ditambah lagi diet nggak sehat cuma biar “body goals”. Hasilnya? Tubuh jadi gampang capek, susah fokus, bahkan pingsan. Nggak banget kan?';
        document.getElementById('konsepImg').src='https://placeholder-image-service.onrender.com/image/400x300?prompt=Teenage girl eating healthy food with iron supplements&id=b782de97-c013-4aec-9327-95e3f3991ee0';
      } else {
        document.getElementById('konsepJudul').textContent='🤱 Anemia pada Bumil: Double Risk, Double Care';
        document.getElementById('konsepText').textContent='Pas hamil, kebutuhan zat besi naik 2x lipat! Kalau kurang, bumil bisa gampang capek, pucat, bahkan risiko bayi lahir BBLR. Jadi, jangan cuek sama tablet tambah darah ya, moms!';
        document.getElementById('konsepImg').src='https://placeholder-image-service.onrender.com/image/400x300?prompt=Pregnant woman with healthy foods and prenatal vitamins&id=b782de97-c013-4aec-9327-95e3f3991ee0';
      }
      showScene('scene3');
    }

    const foods=[
      {name:'Daging Merah',cat:'hijau',icon:'🥩', info:'sumber zat besi paling top.'},
      {name:'Bayam',cat:'hijau',icon:'🥬', info:'kaya zat besi nabati.'},
      {name:'Jeruk',cat:'hijau',icon:'🍊', info:'bantu serap zat besi makin oke.'},
      {name:'Hati Ayam',cat:'hijau',icon:'🥘', info:'Memenuhi zat besi dalam tubuhmu.'},
      
      {name:'Ayam Goreng',cat:'kuning',icon:'🍗', info:'boleh, asal nggak tiap hari.'},
      {name:'Burger',cat:'kuning',icon:'🍔', info:'boleh, asal nggak berlebihan ya!'},
      
      {name:'Kopi/Teh',cat:'merah',icon:'☕', info:'ini bahaya banget ges, dia bisa jadi penghambat.'},
      {name:'Mie Instan',cat:'merah',icon:'🍜', info:'bikin happy sesaat, tapi bikin anemia makin parah.'},
      {name:'Soda Manis',cat:'merah',icon:'🥤', info:'bikin tambah lemes!'},
      {name:'Minuman beralkohol',cat:'merah',icon:'🍻', info:'Jangann, itu jahat banget😲'}
    ];

    let selectedFoods=[];
    let currentFood = null; 

    const feedbackMap = {
        'hijau': {icon: '💚', color: '#22c55e', prefix: 'Mantap! '},
        'kuning': {icon: '🟡', color: '#facc15', prefix: 'Hati-hati, '},
        'merah': {icon: '❌', color: '#ef4444', prefix: 'Waduh, ini toxic! '}
    };

    function showFoodDetails(f) {
        currentFood = f;
        const modal = document.getElementById('foodModal');
        const fb = feedbackMap[f.cat];
        
        document.getElementById('modal-food-name').textContent = f.name;
        document.getElementById('modal-food-icon').textContent = f.icon; 
        
        const simplifiedFeedbackElement = document.getElementById('modal-simplified-feedback');
        
        simplifiedFeedbackElement.textContent = `${fb.icon} ${fb.prefix}${f.info}`;
        simplifiedFeedbackElement.style.color = fb.color;
        
        const addButton = document.getElementById('modal-add-btn');
        
        addButton.style.display = selectedFoods.includes(f) ? 'none' : 'inline-block';

        modal.style.display = 'flex';
    }
    
    function closeModal(event) {
        const foodModal = document.getElementById('foodModal');
        const resultModal = document.getElementById('resultModal');
        
        if (event.target === foodModal) {
            foodModal.style.display = 'none';
        }
        if (event.target === resultModal) {
            resultModal.style.display = 'none';
        }
    }
    
    function addFoodFromModal() {
        if (currentFood) {
            addFood(currentFood);
            document.getElementById('foodModal').style.display = 'none';
        }
    }
    
    function removeFood(index) {
        selectedFoods.splice(index, 1);
        renderPlate();
        
        const fb = document.getElementById('piringFeedback');
        if (selectedFoods.length === 0) {
            fb.textContent = 'Pilih minimal 5 makanan';
            fb.className = 'feedback'; 
            fb.style.color = '#333';
        } else {
             fb.textContent = 'Item berhasil dihapus. Lanjutkan memilih!';
             fb.className = 'feedback';
             fb.style.color = '#333';
        }
    }


    function loadFoods(){
        const grid=document.getElementById('foodGrid');
        grid.innerHTML='';
        foods.forEach(f=>{
            const el=document.createElement('div');
            el.className='food';
            
            el.innerHTML=`<span class="food-icon">${f.icon}</span><p>${f.name}</p>`;
            el.addEventListener('click',()=>showFoodDetails(f)); 
            grid.appendChild(el);
        });
    }
    
    function addFood(f){
        if(selectedFoods.includes(f))return;
        selectedFoods.push(f);
        renderPlate();
        const fb = document.getElementById('piringFeedback');
        const feedback = feedbackMap[f.cat];

        fb.innerHTML = `${f.icon} <span style="color: ${feedback.color}; font-weight: 700;"> ${f.name} masuk!</span> ${feedback.prefix}${f.info}`;
        fb.className = 'feedback'; 
    }
    
    function renderPlate(){
        const items=document.getElementById('piringItems');
        items.innerHTML='';
        selectedFoods.forEach((f, index)=>{
            const pill=document.createElement('div');
            pill.className='pill';
            pill.textContent=f.icon + ' ' + f.name;

            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-btn';
            removeBtn.innerHTML = '&times;';
            removeBtn.setAttribute('onclick', `removeFood(${index})`);

            if(f.cat==='hijau'){pill.style.background='#22c55e'; pill.style.color = '#fff'}
            else if(f.cat==='kuning'){pill.style.background='#facc15'; pill.style.color = '#333'} 
            else{pill.style.background='#ef4444'; pill.style.color = '#fff'}
            
            pill.appendChild(removeBtn);
            items.appendChild(pill);
        });
    }
    
    function handleFinishChallenge() {
      const resultModal = document.getElementById('resultModal');
      const resultTitle = document.getElementById('modal-result-title');
      const resultIcon = document.getElementById('modal-result-icon');
      const resultText = document.getElementById('modal-result-text');
      const continueBtn = document.getElementById('result-continue-btn');
      const okBtn = document.getElementById('result-ok-btn');
      
      if (selectedFoods.length < 5) {
        // --- LOGIKA NOTIFIKASI MINIMAL 5 MENU (Pop-up) ---
        
        resultTitle.textContent = 'PERINGATAN! 🛑';
        resultIcon.textContent = '⚠️';
        resultText.textContent = 'Minimal harus pilih 5 makanan untuk menyelesaikan challenge. Silakan tambahkan menu lagi.';
        resultText.className = 'feedback warn'; 
        
        continueBtn.style.display = 'none'; // Sembunyikan tombol lanjut
        okBtn.textContent = 'Oke';
        okBtn.style.display = 'inline-block'; // Tampilkan tombol Oke untuk menutup

        resultModal.style.display = 'flex';
        return;
      }
      
      // --- LOGIKA EVALUASI HASIL AKHIR ---
      
      const bad = selectedFoods.filter(f => f.cat === 'merah').length;
      
      let finalMessage = '';
      let finalIcon = '';
      let finalClass = '';

      if (bad === 0) {
          finalMessage = 'Piringmu super sehat! Semua item mendukung energi dan melawan anemia. Pertahankan pola makan ini! 💯';
          finalIcon = '✅';
          finalClass = 'feedback good';
      } else if (bad === 1) {
          finalMessage = 'Ada 1 item kurang sehat. Lain kali hindari atau kurangi item toxic agar hasilnya makin optimal! 😉';
          finalIcon = '⚠️';
          finalClass = 'feedback warn';
      } else {
          finalMessage = 'Kebanyakan makanan merah (toxic)! Piringmu belum cukup kuat melawan anemia. Coba lagi untuk piring yang lebih sehat. 💪';
          finalIcon = '🛑';
          finalClass = 'feedback bad';
      }
      
      resultTitle.textContent = 'HASIL EVALUASI PIRINGMU!';
      resultIcon.textContent = finalIcon;
      resultText.textContent = finalMessage;
      resultText.className = finalClass; 
      
      continueBtn.style.display = 'inline-block'; // Tampilkan tombol lanjut
      okBtn.style.display = 'none'; // Sembunyikan tombol Oke
      
      resultModal.style.display = 'flex'; 
      
      document.getElementById('piringFeedback').textContent = 'Lihat hasil evaluasimu di pop-up! 👇';
      document.getElementById('piringFeedback').style.color = '#333';
    }

    function resetPlate() {
      selectedFoods = [];
      const plateItems = document.getElementById('piringItems');
      plateItems.innerHTML = 'Piring masih kosong';
      const feedback = document.getElementById('piringFeedback');
      
      feedback.className = 'feedback'; 
      feedback.textContent = 'Pilih minimal 5 makanan';
      feedback.style.color = '#333';
    }
    
    const quizQ=[
      {q:'Apa tanda umum anemia?',opts:['Semangat berlebih','Mudah lelah','Nafsu makan tinggi'],a:1},
      {q:'Makanan mana yang paling banyak zat besinya?',opts:['Gorengan','Soda','Daging merah'],a:2},
      {q:'Vitamin apa yang membantu penyerapan zat besi?',opts:['Vitamin A','Vitamin C','Vitamin D'],a:1},
      {q:'Gejala yang paling sering ditemukan pada penderita anemia?',opts:['Rasa lemas, pucat, dan mudah lelah','Nafsu makan meningkat drastis','Demam tinggi dan menggigil'],a:0},
      {q:'Penyebab anemia defisiensi zat besi antara lain?',opts:['Konsumsi vitamin C berlebihan','Kehilangan darah saat menstruasi atau pendarahan kronis','Kekurangan sinar matahari'],a:1}
    ];
    function loadQuiz(){const qDiv=document.getElementById('quiz');qDiv.innerHTML='';quizQ.forEach((item,idx)=>{const div=document.createElement('div');div.className='quiz-question';div.innerHTML=`<p>${item.q}</p>`;item.opts.forEach((o,i)=>{div.innerHTML+=`<label><input type=\"radio\" name=\"q${idx}\" value=\"${i}\"> ${o}</label><br>`});qDiv.appendChild(div);});}
    function checkQuiz(){let score=0;quizQ.forEach((item,idx)=>{const val=document.querySelector(`input[name=q${idx}]:checked`);if(val&&parseInt(val.value)===item.a)score++;});document.getElementById('quizFeedback').textContent='👉 Keren! Kamu sudah lebih paham tentang anemia. Jangan lupa praktikkan dalam keseharian ya ✨ Skor kamu: '+score+'/'+quizQ.length;}

    document.addEventListener('DOMContentLoaded',()=>{loadFoods();loadQuiz();});
  </script>
</body>
</html>